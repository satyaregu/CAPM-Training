'use strict';

const prettyPrint = require('../utils/pretty-print');

module.exports = function (req, res, next) {
  if (req.method === 'GET') {
    res.writeHead(200, {
      'content-type': 'application/json; charset=utf-8'
    });
    let pluginData = req.routerConfig.plugins;
    return res.end(JSON.stringify(pluginData, prettyPrint.prettyPrintRegExp, 2));
  }
  next();
};
